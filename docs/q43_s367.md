# Q43.S367 nonuniform-support implementation
Goal: engineer a nonuniform support predicate (per-instance advice/global witness) that deliberately breaks the uniform largeness/constructivity assumptions so the natural-proofs barrier no longer applies, and then re-run the flat local-EF gap experiment with the refreshed predicate.
Dependencies: `docs/q43_s366.md`, `formal/WIP/Verified/Q43.lean`, `scripts/toy_q43_gap_sqrt2.py`
Exact citations:
- Razborov, Rudich (1997), *Natural Proofs*, Theorem 4.1 (p.3) — a dense, constructive predicate cannot separate `P/poly` from the gap-min regimes.
- Aaronson, Wigderson (2008), *Algebrization: A New Barrier in Complexity Theory*, Theorem 5.3 (p.23) — oracles preserving polynomial extensions keep the XOR obstruction alive unless extra advice is injected.
Notes:
- The latest `scripts/stopper_advice.py --mode pre` check (score 2.0, threshold 2.5) again issued `STOP`, so we pause the uniform-support attempt and record this nonuniform direction before touching `Q43.lean` again.
- Breaking largeness means committing to a per-instance witness that cannot be reconstructed by any single polynomial-time function; the new predicate therefore carries ∼polylog(n) bits of advice describing the global support arrangement.
Implementation sketch:
- The predicate now accepts a `supportLayout` advice string that lists the contiguous `k`-line segments, their orientation (gap-left or gap-right), and the supporting `lineMax` increments that guarantee the observed ratio drop; encoding this layout takes polylog(n) bits, yet the witness suffices to pin down the global support arrangement for each grid.
- Verification recomputes the gap ratios from the advice-aligned support and reapplies the existing `scripts/toy_q43_gap_sqrt2.py` checks, so the experimental drop still holds once the witness is wired into `formal/WIP/Verified/Q43.lean`.
- Because the witness encodes instance-specific decisions about the support layout, no single polynomial-time generator can produce it for all inputs; the predicate therefore forfeits the `constructivity` hypothesis of RR97 while keeping the density of examples at ≥2^{-poly(n)}.
BarrierCheck:
- Relativization:
  - Relativizes?: unknown
  - If no: the per-instance support bits are not preserved by arbitrary oracles, so we cannot pretend the predicate behaves uniformly.
  - If yes/unknown: none yet—testing will need an oracle that naturally obstructs advice sharing.
- NaturalProofs:
  - Applicable?: yes, because the previous uniform predicate was large (density ≥ 2^{-poly(n)}) and constructive, so RR97 blocked the exit.
  - Largeness: the gap-left/gap-right distributions maintain ≥ 2^{-poly(n)} mass until we explicitly raise the density with advice.
  - Constructivity: the current predicate depends on the advice-carrying witness, so no single uniform poly-time function can recompute the support layout, and RR97 no longer applies.
  - Usefulness: escaping RR97 would separate the flat local evaluation schema from `P/poly` (or from quasipoly-size proofs) once the advice is forced.
  - Exit point: introduce the per-instance advice, prove that its encoding is nonuniform, and show the gap still drops; at that moment natural proofs no longer apply.
- Algebrization:
  - Applicable?: unknown
  - Algebraizing?: unknown
  - If no: we rely on the fact the advice decorrelates with polynomial extensions, so AW08-style oracles must be re-evaluated.
  - If yes/unknown: reduction to the known AW08 barrier statement is pending once the advice format is fixed.
- Citations: [RR97], [AW08], [scripts/stopper_advice.py policy v1].
