## 3. Базовые включения (полные доказательства)

**Лемма 3.1.** $\mathrm{P}\subseteq\mathrm{NP}$.

*Доказательство.* Детерминированная машина — частный случай недетерминированной (без ветвлений).
Если $L$ решается за полиномиальное время детерминированно, то он решается за то же время и недетерминированно. $\square$

**Лемма 3.2.** $\mathrm{NP}\subseteq\mathrm{PSPACE}$.

*Доказательство (классическое).* Пусть $L\in\mathrm{NP}$ распознаётся НМТ $N$ за $n^k$.
Рассмотрим граф конфигураций $G_x$ для входа $x$: вершины — конфигурации $N$ на $x$, ребро — один шаг вычисления.
Число конфигураций $\le 2^{O(n^k)}$, но каждая конфигурация занимает $O(n^k)$ памяти.

Детерминированная машина проверяет путь от стартовой конфигурации к принимающей, используя DFS по длине пути
(или достижимость Сэвича для NL⊆SPACE(log²) как общий шаблон).
Можно перебирать ветви «вглубь», храня текущую конфигурацию и счётчик шагов до $n^k$.
Это требует $O(n^k)$ памяти для конфигурации и $O(\log n)$ для счётчиков, т.е. полиномиальную память.
Следовательно, $L\in\mathrm{PSPACE}$. $\square$

**Лемма 3.3.** Если $\mathrm{P}=\mathrm{NP}$, то $\mathrm{NP}=\mathrm{coNP}$.

*Доказательство.* Из $\mathrm{P}=\mathrm{NP}$ следует $\mathrm{NP}=\mathrm{P}$.
$\mathrm{P}$ замкнут по дополнению: если $M$ решает $L$ за полиномиальное время, то
машина, меняющая accept/reject, решает $\overline{L}$ за то же время.
Значит $\overline{L}\in\mathrm{P}=\mathrm{NP}$ для любого $L\in\mathrm{NP}$, то есть $\mathrm{coNP}\subseteq\mathrm{NP}$.
Обратное включение $\mathrm{NP}\subseteq\mathrm{coNP}$ симметрично. $\square$
