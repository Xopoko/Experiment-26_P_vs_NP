# Q39.S160 gadget toy check (barrier note)
Goal: evaluate the rank-2 witness after inserting the oracle-specific gadget by re-running `scripts/toy_q39_rank2.py --alt 118` once the gadget implementation in S159 is wired into the contiguous orbit.
Dependencies: `docs/q39_s159.md`, `docs/q39_s158.md`, `formal/WIP/Verified/Q39.lean`, `scripts/toy_q39_rank2.py`.
Exact citations:
- Baker, Gill, Solovay (1975), *Relativizations of the P = ? NP Question* (Thm. 1, p.15) — the gadget must introduce oracle dependence to avoid staying within the fully relativizing XOR translation.
- Katz (2005), *Relativizing the P vs. NP Question* (Claim 1, p.1) — the toy check is meaningful only if the gadget disrupts the continuation of oracle-agnostic rank-2 witnesses.
- Aaronson, Wigderson (2008), *Algebrization: A New Barrier in Complexity Theory* (Thm. 5.3, p.23) — the gadget must also break the algebraic symmetry of XOR arithmetic so the algebraic barriers no longer guarantee rank 2.
Notes:
- The gadget implementation is described in `docs/q39_s159.md`; once the global support flag is encoded in Lean, we add it as a guard around the next alt shift before calling the toy script.
- Running `scripts/toy_q39_rank2.py --alt 118` after that change should reveal whether the new gadget still produces a rank-2 witness, or if the oracle-specific data is required and the witness disappears.
- If the toy still reports rank 2, we log the result and plan `Q39.S161-post-gadget-adjustments`; if the rank vanishes, the gadget successfully broke the relativizing chain and we document the failure mode before moving on.
BarrierCheck:
- Relativization:
  - Relativizes?: unknown (the gadget should make the next shift depend on oracle/advice bits).
  - If no: the gadget is effectively oracle-independent and the barrier remains; we would need to revisit the gadget plan.
  - Exit point: the gadget guard ensures the shift now references oracle-specific knowledge, so the relativization barrier is broken unless the gadget is removed.
- NaturalProofs:
  - Applicable?: no (the concern stays with syntactic translation invariants).
- Algebrization:
  - Applicable?: yes (AW08 shows algebraic extensions preserve XOR arithmetic; the gadget must break algebraic symmetry as well).
- Citations: [BGS75], [Katz05], [AW08]
