# P vs NP — исследовательские шаги 16.85–16.105 (Tseitin / proof complexity)

Этот файл — часть `docs/research/` (см. [index](index.md)).
Главный файл: `P_vs_NP.md`.

[Открыть главный ноутбук](../../P_vs_NP.md)

### 16.85. Исследовательский шаг: Tseitin($G,\chi$) и паритетный сертификат невыполнимости

- `Линза:` Инвариант.
- `Определение:` Пусть $G=(V,E)$ — неориентированный граф и $\chi:V\to\{0,1\}$
  («заряды»). Каждому ребру $e\in E$ сопоставим булеву переменную $x_e$.
  XOR‑система Tseitin задаётся уравнениями по модулю 2:
  $$\bigoplus_{e\ni v} x_e\ =\ \chi(v)\qquad\text{для всех }v\in V.$$
- `Утверждение:` Если для некоторой связной компоненты $H\subseteq G$ выполнено
  $\bigoplus_{v\in V(H)}\chi(v)=1$, то система (а значит и любая CNF/3‑CNF
  кодировка этих XOR‑ограничений) невыполнима.
- `Доказательство:` Возьмём XOR по всем вершинам $v\in V(H)$ от левых частей.
  Каждая переменная $x_e$ (для ребра $e$ внутри $H$) входит ровно дважды — по
  концам ребра — и потому сокращается: $\bigoplus_{v\in V(H)}\bigoplus_{e\ni v}x_e=0$.
  Тогда из уравнений следует $0=\bigoplus_{v\in V(H)}\chi(v)=1$, противоречие.
- `3‑CNF кодировка для 3‑регулярного $G$:` если $\deg(v)=3$ и инцидентные ребра
  имеют переменные $a,b,c$, то ограничение $a\oplus b\oplus c=\chi(v)$ эквивалентно
  3‑CNF из 4 клауз (запрещаем 4 несовпадающих по паритету тройки). Поэтому при
  3‑регулярном $G$ получаем 3‑CNF размера $4|V|$, и каждая переменная $x_e$ входит
  ровно в $8$ клауз (по $4$ у каждого конца ребра).
- `Toy‑тест:` одно ребро $e=\{u,v\}$ и $\chi(u)=1,\chi(v)=0$ даёт систему
  $x_e=1$ и $x_e=0$ (явная невыполнимость); паритетный аргумент выше ровно это
  фиксирует как $\chi(u)\oplus\chi(v)=1$.
- `Статус:` доказано (паритетный инвариант) + явная 3‑CNF для $\Delta=3$.
- `Барьер‑чек:` r — применимо (тривиально релятивизируется), NP — неприменимо
  (нет «natural property»), alg — неприменимо.
- `Следующий шаг:` зафиксировать в основном тексте, что это даёт семейство
  невыполнимых 3‑CNF с bounded‑occ на 3‑регулярных экспандерах, и привязать
  к известным резолюционным нижним оценкам (через экспансию/ширину).

### 16.86. Исследовательский шаг: экспансия ⇒ ширина/размер резолюции для Tseitin на bounded‑degree графах

- `Линза:` Трейд‑офф.
- `Утверждение:` Пусть $G=(V,E)$ — связный граф максимальной степени $\le k$, а
  $e(G):=\min_{A\subseteq V,\ |V|/3\le |A|\le 2|V|/3}|E(A,\bar A)|$ — его экспансия
  (Itsykson–Oparin 2013, Def. 2). Если Tseitin($G,\chi$) невыполнима, то ширина
  резолюционного опровержения удовлетворяет $W(\mathrm{Tseitin}(G,\chi)\vdash 0)\ge e(G)-1$
  (Itsykson–Oparin 2013, Cor. 1). Тогда по trade‑off “width ⇒ size”
  (Ben‑Sasson–Wigderson 2001; также сформулировано как Thm. 1 в Itsykson–Oparin 2013)
  получаем для числа переменных $n:=|E|$:
  $$S(\mathrm{Tseitin}(G,\chi))\ \ge\ \exp\!\left(\frac{(e(G)-k-1)^2}{n}\right),\qquad
    ST(\mathrm{Tseitin}(G,\chi))\ \ge\ 2^{\,e(G)-k-1}.$$
  В частности, для семейства графов степени $O(1)$ с $e(G)=\Omega(|V|)$ (экспандеры)
  имеем $n=\Theta(|V|)$ и потому $S\ge \exp(\Omega(|V|))$.
- `Toy‑тест:` цикл $C_n$ имеет $e(C_n)=2$, значит оценка даёт лишь константную
  нижнюю границу на ширину/размер; это согласуется с тем, что “плохая” экспансия
  не должна давать сильных нижних оценок.
- `Статус:` доказано (цитата Cor. 1 + стандартный width–size trade‑off).
- `Барьер‑чек:` r — неприменимо (модель‑специфическая нижняя оценка),
  NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` применить к 3‑регулярным экспандерам и 3‑CNF кодировке из §16.85,
  чтобы получить явное семейство bounded‑occ 3‑CNF с экспоненциальной резолюцией.

### 16.87. Исследовательский шаг: явное bounded‑occ Tseitin‑семейство на 3‑регулярных экспандерах

- `Линза:` Эквивалентность.
- `Утверждение:` Существует сильно‑явное семейство 3‑регулярных экспандеров
  $\{G_n\}$ с $\lambda(G_n)\le \lambda_0<1$ (например, семейство Ramanujan‑графов;
  см. обсуждение в `../../resources/downloads/arora_barak.pdf`, §16.3, Remark 16.10).
  Тогда по связи спектральной и комбинаторной экспансии (Arora–Barak, Thm. 16.18)
  имеем $|E(A,\bar A)|\ge \rho d|A|$ для всех $|A|\le |V|/2$ и некоторой константы
  $\rho>0$, откуда $e(G_n)=\Omega(|V_n|)$ в смысле Def. 2 из Itsykson–Oparin.
  Пусть $\chi_n$
  имеет нечётную сумму зарядов, и $F_n$ — 3‑CNF кодировка Tseitin($G_n,\chi_n$) из §16.85.
  Тогда:
  (i) $F_n$ невыполнима; (ii) $|F_n|=\Theta(|V_n|)$; (iii) bounded‑occ = 8;
  (iv) размер резолюционного опровержения $S(F_n)=\exp(\Omega(|V_n|))$ (по §16.86).
- `Toy‑тест:` если $G$ — цикл, то $e(G)=2$ и §16.86 даёт лишь константные границы;
  на экспандере $e(G)=\Omega(|V|)$ и при $|E|=\Theta(|V|)$ получаем экспоненту
  $\Omega(|V|)$ в нижней оценке на $S(F)$.
- `Статус:` доказано (композиция 16.85 + 16.86 + существование expander family).
- `Барьер‑чек:` r — неприменимо (модель‑специфическая нижняя оценка),
  NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` уточнить/зафиксировать конкретную ссылку на выбранную явную
  3‑регулярную expander family (по необходимости) и отметить, какие системы
  доказательств (PC/EF) остаются открытыми на этих формулах.

### 16.88. Исследовательский шаг: Tseitin легко в EF; PC зависит от поля/базиса

- `Линза:` Алгебраизация.
- `Утверждение:` Пусть $G$ связен и $\bigoplus_{v\in V}\chi(v)=1$. Тогда 3‑CNF
  кодировка $F=\mathrm{TseitinCNF}(G,\chi)$ из §16.85 имеет полиномиальное
  опровержение в Extended Frege (EF), так как
  противоречие даёт суммирование XOR‑уравнений по модулю 2. Для Polynomial
  Calculus: над полем характеристики 2 соответствующая линейная система
  опровергается в степени 1; над $\mathrm{char}(F)\ne 2$ в Fourier‑базисе известны
  линейные degree‑нижние оценки (Beame–Sabharwal 2000, Thm. 2.18).
- `Доказательство (EF‑каркас):`
  Обозначим $a\oplus b := (a\wedge\neg b)\vee(\neg a\wedge b)$.
  Тождества ассоциативности/коммутативности и сокращения
  $a\oplus(a\oplus b)\leftrightarrow b$, $a\oplus a\leftrightarrow 0$
  имеют константный размер (3 переменные) ⇒ константные Frege‑выводы.
  Для каждой вершины $v$ степени 3, с инцидентными рёбрами $e_1,e_2,e_3$,
  4 клаузы из §16.85 эквивалентны формуле
  $$(x_{e_1}\oplus x_{e_2}\oplus x_{e_3})\leftrightarrow \chi(v)$$
  (проверка 8 значений; константный вывод).
  В EF введём extension‑переменные $p_v\leftrightarrow (x_{e_1}\oplus x_{e_2}\oplus x_{e_3})$
  и $P\leftrightarrow\bigoplus_{v\in V} p_v$ (цепочка/дерево XOR, размер $O(|V|)$).
  Из предыдущего получаем $P\leftrightarrow\bigoplus_v\chi(v)$, а значит $P$.
  С другой стороны, подставляя определения $p_v$ и используя локальные
  перестановки/скобки XOR (полиномиально много шагов), получаем
  $$P\leftrightarrow\bigoplus_{v\in V}\ \bigoplus_{e\ni v} x_e\ \leftrightarrow\ \bigoplus_{e\in E}(x_e\oplus x_e)\ \leftrightarrow\ 0,$$
  противоречие.
- `Ссылка (EF ⊢ XOR/Gauss):` отмечено, что EF «легко симулирует Gaussian elimination»
  (и потому полиномиально доказывает линейно‑алгебраические утверждения),
  см. Bonet–Buss–Pitassi 2002, `../../resources/downloads/bonet_buss_pitassi_2002_hard_examples_frege.pdf` (p. 7).
- `PC‑заметка:` Если рассматривать Tseitin как линейную систему над $\mathbb F_2$,
  $$\sum_{e\ni v} x_e = \chi(v)\quad(\bmod 2),$$
  то в PC над $\mathbb F_2$ опровержение получается в степени 1: суммируем
  уравнения по $v\in V$, получаем $0=\bigoplus_v\chi(v)=1$.
- `Известный факт (PC, $\mathrm{char}(F)\ne 2$):` для любой последовательности bounded‑degree
  графов $\{G_n\}$ с $c(G_n)=\Omega(1)$ (экспандеры) любая PC‑рефутация
  $\mathrm{Tseitin}(G_n)$ над полем нечётной или нулевой характеристики имеет степень
  $\Omega(|V_n|)$, а по связи degree→size также размер $\exp(\Omega(|V_n|))$
  (Razborov 2023, Thm. 6.8 + абзац после Thm. 6.9).
- `Toy‑тест:` $G=C_3$ и $\chi\equiv 1$. Сумма трёх уравнений даёт
  $(x_{12}\oplus x_{12})\oplus(x_{23}\oplus x_{23})\oplus(x_{31}\oplus x_{31})=1$,
  то есть $0=1$.
- `Статус:` EF‑верхняя оценка — доказано как схема; для PC над $\mathbb F_2$ — доказано;
  для $\mathrm{char}(F)\ne 2$ степень и размер — известные нижние оценки (см. факт выше).
- `Барьер‑чек:` r — неприменимо (утверждение про конкретные proof‑системы),
  NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` см. §16.89 (клаузная форма TseitinCNF легко в PC над $\mathbb F_2$);
  дальше — понять, переносится ли (и как) degree‑LB для $\mathrm{char}(F)\ne 2$ с XOR‑системы
  на 3‑CNF кодировку.

### 16.89. Исследовательский шаг: TseitinCNF легко в PC над $\mathbb F_2$ (степень 3)

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $G$ — 3‑регулярный граф, $\chi:V\to\{0,1\}$ и
  $\bigoplus_{v\in V}\chi(v)=1$. Пусть $F=\mathrm{TseitinCNF}(G,\chi)$ — 3‑CNF из §16.85.
  Тогда над полем $\mathbb F_2$ существует Polynomial Calculus‑рефутация $F$ степени $\le 3$
  и размера $O(|V|)$.
- `Доказательство (локальная линейная форма):`
  Переводим клаузу $(\ell_1\vee \ell_2\vee \ell_3)$ в полиномиальное уравнение
  $$(1-\ell_1)(1-\ell_2)(1-\ell_3)=0,$$
  где литерал $\neg x$ интерпретируется как $1-x$ (булевы аксиомы $x^2-x=0$ не нужны).
  Зафиксируем вершину $v$ степени 3 с инцидентными рёбрами $e_1,e_2,e_3$ и обозначим
  $x_i:=x_{e_i}$.
  - Если $\chi(v)=1$, то 4 клаузы из §16.85 дают 4 аксиомы:
    $$(1-x_1)(1-x_2)(1-x_3)=0,\ (1-x_1)x_2x_3=0,\ x_1(1-x_2)x_3=0,\ x_1x_2(1-x_3)=0.$$
    Складывая их в $\mathbb F_2$, получаем $1+x_1+x_2+x_3=0$, то есть $x_1+x_2+x_3+\chi(v)=0$.
  - Если $\chi(v)=0$, то аналогично из 4 клауз получаем аксиомы:
    $$(1-x_1)(1-x_2)x_3=0,\ (1-x_1)x_2(1-x_3)=0,\ x_1(1-x_2)(1-x_3)=0,\ x_1x_2x_3=0,$$
    и их сумма равна $x_1+x_2+x_3=0$, то есть снова $x_1+x_2+x_3+\chi(v)=0$.

  Итак, для каждого $v$ выводится линейное уравнение
  $$\sum_{e\ni v} x_e\ +\ \chi(v)\ =\ 0\quad(\text{в }\mathbb F_2).$$
  Складывая эти уравнения по всем $v\in V$, получаем
  $$\sum_{v\in V}\sum_{e\ni v}x_e\ +\ \sum_{v\in V}\chi(v)=0.$$
  Каждая переменная $x_e$ входит в левую часть ровно дважды (по концам ребра), значит
  в $\mathbb F_2$ сокращается, и остаётся $\sum_v\chi(v)=0$, то есть $1=0$ — противоречие.
  Степень доказательства $\le 3$ (все клаузные аксиомы степени 3), число строк $O(|V|)$.
- `Toy‑тест:` $G=C_3$ и $\chi\equiv 1$. Для каждой вершины выводится линейное уравнение
  по трём рёбрам, сумма трёх уравнений даёт $1=0$.
- `Статус:` доказано (явный локальный вывод + суммирование по графу).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` сформулировать такой же «локальный перевод» для $\mathrm{char}(F)\ne 2$
  (или найти ссылку), чтобы связать TseitinCNF с известными degree‑LB для PC.

### 16.90. Исследовательский шаг: TseitinCNF $\leftrightarrow$ биномиальная Tseitin в PC при $\mathrm{char}(F)\ne 2$

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $F$ — поле, $\mathrm{char}(F)\ne 2$, и $v$ — вершина степени 3
  с инцидентными переменными $x_1,x_2,x_3\in\{0,1\}$ и зарядом $\chi\in\{0,1\}$.
  Пусть 4 клаузы TseitinCNF($v$) — стандартная 3‑CNF кодировка ограничения
  $x_1\oplus x_2\oplus x_3=\chi$ (как в §16.85), переведённая в PC‑аксиомы вида
  $(1-\ell_1)(1-\ell_2)(1-\ell_3)=0$. Тогда:
  1) из этих 4 клауз в PC выводится одно уравнение степени 3
     $$X(x_1,x_2,x_3)-\chi=0,$$
     где
     $$X(x_1,x_2,x_3):=x_1+x_2+x_3-2(x_1x_2+x_1x_3+x_2x_3)+4x_1x_2x_3;$$
  2) при линейной замене $y_i:=1-2x_i$ это эквивалентно биномиальному уравнению
     $$y_1y_2y_3-(1-2\chi)=0\quad(\text{и }y_i^2-1=0);$$
  3) наоборот, из $X-\chi=0$ в PC выводятся все 4 клаузные аксиомы с константной
     потерей степени (≤6). Следовательно, для 3‑регулярных графов TseitinCNF и
     «биномиальная» Tseitin (Fourier/±1‑база) p‑эквивалентны по степени в PC.
     В частности, degree/size‑нижние оценки для биномиальной Tseitin при $\mathrm{char}(F)\ne 2$
     (Razborov 2023, Thm. 6.8; см. также Beame–Sabharwal 2000, Thm. 2.18) переносятся на TseitinCNF.

- `Доказательство (1, локально):`
  В $\mathbb F[x_1,x_2,x_3]/(x_i^2-x_i)$ каждая клаузная аксиома для вершины степени 3 —
  это индикатор запрещённого присваивания (моном степени 3 в литералах $x_i$ и $(1-x_i)$).
  Для $\chi=0$ запрещены 4 нечётные тройки, и сумма 4 индикаторов равна ровно $X$.
  Для $\chi=1$ запрещены 4 чётные тройки, и сумма индикаторов равна $1-X$.
  В обоих случаях из 4 равенств “индикатор = 0” выводится $X-\chi=0$
  (для $\chi=1$ умножением на $-1$).

- `Доказательство (2):`
  Раскрывая скобки,
  $$(1-2x_1)(1-2x_2)(1-2x_3)=1-2X(x_1,x_2,x_3).$$
  Поэтому
  $$y_1y_2y_3-(1-2\chi)=(1-2X)-(1-2\chi)=-2(X-\chi),$$
  то есть уравнения отличаются на ненулевой скаляр.

- `Доказательство (3, локально):`
  Пусть $m_{a_1a_2a_3}:=\prod_i (x_i)^{a_i}(1-x_i)^{1-a_i}$ — индикатор присваивания $(a_1,a_2,a_3)$.
  Если $(a_1\oplus a_2\oplus a_3)\ne\chi$, то на этом присваивании $X-\chi=\pm 1$, а на остальных
  $m_{a_1a_2a_3}=0$, значит в фактор‑алгебре тождественно
  $$(X-\chi)\,m_{a_1a_2a_3}=\pm m_{a_1a_2a_3}.$$
  Из $X-\chi=0$ по правилу умножения получаем $(X-\chi)m_{a_1a_2a_3}=0$, откуда $m_{a_1a_2a_3}=0$.
  Это ровно одна из 4 клауз TseitinCNF($v$). Степень: $\deg(X-\chi)\le 3$, $\deg(m)\le 3$, итого ≤6.

- `Toy‑тест:` $\chi=1$. Сумма 4 «чётных» индикаторов (000,011,101,110) равна $1-X$,
  значит из них следует $X-1=0$, а затем и $y_1y_2y_3+1=0$.
- `Статус:` доказано (локальная p‑эквивалентность по степени при $\mathrm{char}(F)\ne 2$).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` если нужно для основного текста, добавить 1‑строчную ремарку в 15.x:
  «при $\mathrm{char}(F)\ne 2$ TseitinCNF наследует PC degree/size‑LB через 16.90».

### 16.91. Исследовательский шаг: Tseitin имеет полиномиальные Frege‑опровержения (Urquhart 1987)

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $G$ связен и $\bigoplus_{v\in V}\chi(v)=1$; пусть $\mathrm{TseitinCNF}(G,\chi)$ — клаузная
  форма уравнений по модулю 2 (как в §16.85 для $\deg(G)=3$, или в общем виде через $2^{\deg(v)-1}$ клауз на вершину).
  Тогда $\mathrm{TseitinCNF}(G,\chi)$ имеет полиномиальное опровержение в обычном Frege (в частности,
  в «Kleene’s axiomatic system», т.е. Hilbert‑style propositional calculus): Urquhart (1987) даёт
  явный вывод длины $O(n^4)$ (где $n=\Theta(|V|)$ при bounded‑degree).
- `Доказательство (идея из Urquhart 1987, Lemma 6.1):`
  1) для каждой вершины $v$ из клаузы‑кодировки восстанавливается соответствующее XOR‑уравнение
     (у Urquhart — «biconditional»/эквивалентность, фиксирующая чётность литералов у вершины);
  2) эти эквивалентности «склеиваются» в одно большое выражение; затем с помощью
     ассоциативности/коммутативности «всплывают» парные вхождения переменных и сокращаются;
  3) остаётся противоречие, так как левая часть сокращается в $0$, а правая даёт
     $\bigoplus_v\chi(v)=1$.
  Подробности: Urquhart 1987, §6, Lemma 6.1, `../../resources/downloads/urquhart_1987_hard_examples_resolution.pdf`.
- `Toy‑тест:` $G=C_3$, $\chi\equiv 1$: три локальные XOR‑уравнения суммируются в $0=1$
  (см. также toy‑тест в §16.88).
- `Статус:` доказано (верхняя оценка/ссылка).
- `Барьер‑чек:` r — неприменимо (это верхняя оценка в фиксированной модели доказательств),
  NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` уточнить «минимальную глубину» полиномиальных Frege‑опровержений Tseitin:
  зафиксировать лучшую известную depth‑vs‑size оценку (ссылка на работу уровня Håstad’17/18 и/или последующие усиления).

### 16.92. Исследовательский шаг: depth‑vs‑size для Tseitin(Grid) в bounded‑depth Frege (Håstad 2020)

- `Линза:` Трейд‑офф.
- `Утверждение:` Рассмотрим Tseitin‑противоречие на $n\times n$ решётке (grid).
  Если $d\le \frac{\log n}{59\log\log n}$, то любая depth‑$d$ Frege‑рефутация имеет размер
  $\exp(\Omega(n^{1/(58(d+1))}))$ (Håstad 2020, Thm. 6.5; `../../resources/downloads/hastad_2020_small_depth_frege_tseitin_grids.pdf`).
  В частности, любая полиномиальная
  по $n$ (а значит и по числу переменных $N=\Theta(n^2)$) Frege‑рефутация требует формул глубины
  $\Omega(\log n/\log\log n)$ (Håstad 2020, Cor. 6.6).
- `Toy‑тест:` при константной глубине $d=O(1)$ получаем superpolynomial нижнюю оценку
  $\exp(\Omega(n^{\Omega(1)}))=\exp(\Omega(N^{\Omega(1)}))$ для Tseitin(Grid$_{n,n}$).
- `Статус:` известный факт (точная ссылка).
- `Барьер‑чек:` r — неприменимо (нижняя оценка для ограниченной модели доказательств),
  NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` сопоставить с «верхней» оценкой $O(\log n)$ глубины для poly‑size Frege‑рефутаций Tseitin
  (Buss‑style счёт/паритет) и зафиксировать, насколько tight остаётся разрыв $O(\log\log n)$.

### 16.93. Исследовательский шаг: верхняя оценка $O(\log n)$ глубины для poly‑size Frege на Tseitin (bounded‑degree)

- `Линза:` Сжатие/канонизация.
- `Утверждение:` Для Tseitin‑противоречия на любом bounded‑degree графе (клаузная форма паритетных уравнений)
  существует полиномиальный по $n$ Frege‑вывод, использующий формулы глубины $O(\log n)$.
  Точная ссылка: Håstad 2020 прямо отмечает, что по методам Buss’87 (poly‑size $O(\log n)$‑depth Frege для PHP)
  «similar proofs can be constructed … for the Tseitin contradiction for any constant-degree graph»,
  см. `../../resources/downloads/hastad_2020_small_depth_frege_tseitin_grids.pdf`, p. 2.
- `Toy‑тест:` на цикле можно выписать balanced‑формулу для XOR всех уравнений и сократить парные вхождения рёбер,
  получая $0=1$ при нечётной сумме зарядов.
- `Статус:` известный факт (точная ссылка; конструкция не развёрнута в этом ноутбуке).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` найти/зафиксировать источник с явной конструкцией (или написать самодостаточный вывод)
  и попытаться закрыть разрыв между $\Omega(\log n/\log\log n)$ (16.92) и $O(\log n)$.

### 16.94. Исследовательский шаг: балансовка формул ⇒ можно требовать глубину $O(\log n)$ в Frege

- `Линза:` Трейд‑офф.
- `Утверждение:` Любая булева формула размера $m$ эквивалентна формуле глубины $O(\log m)$
  (Brent/Spira restructuring). Точная ссылка: Bonet–Buss (2002), Theorem 2 (Spira),
  `../../resources/downloads/bonet_buss_2002_size_depth_tradeoffs_boolean_formulae.pdf`.
  Следовательно, если $\mathrm{TseitinCNF}(G,\chi)$ имеет polynomial‑size Frege‑рефутацию
  (16.91, Urquhart 1987), то можно считать, что все большие промежуточные формулы
  в этой рефутации сбалансированы до глубины $O(\log n)$ (с полиномиальным blow‑up),
  т.е. верхняя оценка $O(\log n)$ по глубине не требует отдельной «счётной» конструкции.
- `Toy‑тест:` длинная цепочка дизъюнкций/биимпликаций длины $m$ имеет глубину $\Theta(m)$,
  но после балансировки становится глубины $O(\log m)$.
- `Статус:` частично (фиксирована точная ссылка на формульную балансировку; преобразование всей Frege‑рефутации
  в log‑depth оставлено как стандартная техника «замены линий на эквивалентные»).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` если нужно закрыть «техническую» часть, выписать явную схему:
  как из линии $A$ и доказанного $A\leftrightarrow A'$ (balanced) получать корректный log‑depth Frege‑вывод.

### 16.95. Исследовательский шаг: Urquhart‑Tseitin + Spira‑перевод ⇒ $O(\log n)$‑depth Frege (строго)

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть есть Frege‑опровержение формулы $\Phi$ в языке $L_\infty$, где в частности разрешены
  $\{\wedge,\oplus,\neg\}$ или $\{\equiv,\oplus\}$ (как в Urquhart 1987 для «biconditionals»).
  Тогда существует полиномиально по размеру доказательства Frege‑опровержение $\Phi'$ в стандартном языке
  $L_\in=\{\wedge,\vee,\neg\}$, причём перевод $\phi\mapsto\phi'$ устроен так, что:
  (i) $\phi'$ эквивалентна $\phi$ (по смыслу); (ii) глубина $\phi'$ равна $O(\log|\phi|)$ (Spira‑rebalancing);
  (iii) размер $\phi'$ полиномиален в $|\phi|$. Ссылка: Buss (1997), Theorem 3 + доказательство‑эскиз
  «indirect translation via Spira», `../../resources/downloads/buss_1997_proof_complexity_intro.pdf`.
  Следствие: для bounded‑degree $\mathrm{TseitinCNF}(G,\chi)$ (нечётная сумма зарядов) существует
  polynomial‑size Frege‑опровержение, использующее формулы глубины $O(\log n)$: берём
  Urquhart (1987) (16.91) и применяем перевод Buss’97/Spira.
- `Toy‑тест:` если делать «прямой перевод» $\phi_1\oplus\phi_2\mapsto(\phi_1\wedge\neg\phi_2)\vee(\neg\phi_1\wedge\phi_2)$
  рекурсивно по линейной глубине, то размер может стать экспоненциальным; Spira‑перевод
  «ре‑балансирует» дерево и держит размер полиномиальным (Buss’97, Proof sketch к Thm. 3).
- `Статус:` известный факт (закрыта техническая часть для 16.94/вопроса Q14).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` использовать это как «чистое» обоснование верхней оценки $O(\log n)$ по глубине и
  дальше улучшать нижние оценки (сужать разрыв с 16.92).

### 16.96. Исследовательский шаг: Tseitin на экспандерах — depth‑vs‑size (Pitassi–Rossman–Servedio–Tan 2016)

- `Линза:` Трейд‑офф.
- `Утверждение:` Существует линейного размера 3‑CNF‑противоречие $\mathrm{Tseitin}(G_n[\alpha])$
  на 3‑регулярном $n$‑вершинном экспандере, такое что для любого $d$ любая depth‑$d$ Frege‑рефутация
  имеет размер $n^{\Omega((\log n)/d^2)}$ (Pitassi–Rossman–Servedio–Tan 2016, Thm. 1,
  `../../resources/downloads/pitassi_rossman_servedio_tan_2016_expander_switching_lemma.pdf`).
  Следовательно, любая polynomial‑size Frege‑рефутация требует глубины $d=\Omega(\sqrt{\log n})$.
- `Toy‑тест:` если $d=O(1)$, то нижняя оценка даёт размер $\exp(\Omega((\log n)^2))=n^{\Omega(\log n)}$ (quasi‑poly),
  а если $d=\Theta(\sqrt{\log n})$, то показатель $(\log n)/d^2=\Theta(1)$ и оценка перестаёт быть superpolynomial.
- `Статус:` известный факт (точная ссылка).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` сопоставить 16.96 (экспандер: $\sqrt{\log n}$) с 16.92 (grid: $\log n/\log\log n$)
  и понять, где именно “теряется” $\sqrt{\log n}\to\log n/\log\log n$ в технике ограничений.

### 16.97. Исследовательский шаг: treewidth даёт tight depth‑vs‑size для Tseitin в bounded‑depth Frege (Galesi–Itsykson–Riazanov–Sofronova 2019)

- `Линза:` Трейд‑офф.
- `Утверждение:` Пусть $G$ — связный неориентированный граф на $n$ вершинах, $t=\mathrm{tw}(G)$, и $\mathrm{Tseitin}(G,f)$ невыполнима.
  Тогда существуют константы $K,C>0$ такие, что для любого $d\le K\log n/\log\log n - C$ любая depth‑$d$ Frege‑рефутация
  имеет размер $\ge 2^{t^{\Omega(1/d)}}$ (Galesi–Itsykson–Riazanov–Sofronova 2019, Thm. 18,
  `../../resources/downloads/galesi_itsykson_riazanov_sofronova_2019_bounded_depth_frege_tseitin_all_graphs.pdf`).
  Более того, для всех достаточно больших $d$ существует depth‑$d$ Frege‑рефутация размера $\le 2^{t^{O(1/d)}}\cdot\mathrm{poly}(|\mathrm{Tseitin}(G,f)|)$
  (там же, Thm. 19).
- `Toy‑тест:` если $\mathrm{tw}(G)=\Omega(n)$ (в частности, для bounded‑degree экспандеров, как отмечено в той же работе),
  то polynomial‑size ($n^{O(1)}$) возможно только при $d=\Omega(\log n/\log\log n)$; при $d=\Theta(\log n/\log\log n)$ верхняя оценка Thm. 19
  даёт размер $2^{n^{O(\log\log n/\log n)}}=2^{O(\log n)}=n^{O(1)}$, т.е. порог по глубине на экспандерах совпадает с grid‑случаем (16.92)
  и усиливает PRST’16 (16.96).
- `Статус:` известный факт (точная ссылка; закрывает «усиление для экспандеров/всех графов» из Q15).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` если понадобится связать с «поиском доказательств», извлечь Cor. 34 из той же работы:
  bounded‑depth Frege размера $S$ ⇒ tree‑like Resolution размера $2^{\mathrm{poly}(\log S)}$.

### 16.98. Исследовательский шаг: bounded‑depth Frege ⇒ tree‑like Resolution (quasi‑poly) для Tseitin (GIRS 2019, Cor. 34)

- `Линза:` Эквивалентность.
- `Утверждение:` Для любой невыполнимой Tseitin‑CNF $\mathrm{Tseitin}(G,f)$: если она имеет доказательство размера $S$
  в bounded‑depth Frege (в смысле статьи; ниже упоминается «constant‑depth Frege»), то она имеет tree‑like Resolution‑опровержение
  размера $\le 2^{\mathrm{poly}(\log S)}$ (Galesi–Itsykson–Riazanov–Sofronova 2019, Cor. 34,
  `../../resources/downloads/galesi_itsykson_riazanov_sofronova_2019_bounded_depth_frege_tseitin_all_graphs.pdf`).
- `Доказательство (эскиз из §5 той же работы):` там используется (i) верхняя оценка на tree‑like Resolution через ширину:
  по §16.99 (Beame–Beck–Impagliazzo 2016, Lemma 61) имеем $\mathrm{size}_{\mathrm{TL\text{-}Res}}\le n^{O(\mathrm{cw}(G))}$;
  по §16.100–16.101 (и определению $w(G):=W(T(G,\\varphi)\\vdash\\bot)-1$) получаем $\mathrm{cw}(G)\le w(G)+2$, значит
  $\mathrm{size}_{\mathrm{TL\text{-}Res}}(T(G,\\varphi))\le n^{O(w(G))}=2^{O(\mathrm{tw}(G)\,\Delta(G)\,\log n)}$
  (Harvey–Wood 2014, (2); см. §16.102); (ii) нижняя оценка из главной теоремы для bounded‑depth Frege: $S\ge 2^{\mathrm{tw}(G)^{\varepsilon}}$
  для некоторой константы $\varepsilon>0$ (глубина фиксирована); (iii) тривиально $S\ge|\mathrm{Tseitin}(G,f)|\ge 2^{\Delta(G)-1}$ и $S\ge n$.
  Отсюда $\mathrm{tw}(G)\le (\log S)^{1/\varepsilon}$, $\Delta(G)\le O(\log S)$ и $\log n\le O(\log S)$, и подстановка в (i)
  даёт $2^{O((\log S)^{1/\varepsilon+2})}=2^{\mathrm{poly}(\log S)}$.
- `Toy‑тест:` если $S=n^{O(1)}$, то получаем tree‑like Resolution размера $\le 2^{\mathrm{poly}(\log n)}=n^{\mathrm{polylog}\,n}$ (quasi‑poly).
- `Статус:` известный факт (точная формулировка + минимальный вывод «откуда берётся» $2^{\mathrm{poly}(\log S)}$).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` при необходимости перенести цепочку §16.99–16.102 (определение $w(G)$ и $n^{O(w(G))}$) в основной текст
  рядом с формулировкой Cor. 34, чтобы не ссылаться на «см. обсуждение».

### 16.99. Исследовательский шаг: tree‑like Resolution‑upper bound для Tseitin через carving width (Beame–Beck–Impagliazzo 2016)

- `Линза:` Трейд‑офф.
- `Утверждение:` Пусть $G$ — граф на $n$ вершинах с carving width $W$ (Definition 58). Тогда соответствующая
  Tseitin‑таутология $\tau(G)$ имеет tree‑like resolution‑рефутацию ранга $\le W\log_{3/2} n$; в частности,
  существует tree‑like resolution‑рефутация размера $\le n^{W(\log 3-1)}$ и clause space $\le W\log_{3/2} n+1$
  (Beame–Beck–Impagliazzo 2016, Lemma 61,
  `../../resources/downloads/beame_beck_impagliazzo_2016_time_space_tradeoffs_resolution.pdf`).
- `Toy‑тест:` при $W=O(1)$ получаем polynomial‑size tree‑like resolution для $\tau(G)$ (и глубину дерева $O(\log n)$);
  при каждом рекурсивном разрезе по (1/3,2/3)-лемме ранг увеличивается на $\le W$, а высота рекурсии равна $\log_{3/2} n$.
- `Статус:` известный факт (точная ссылка; закрывает «где именно берётся» tree‑like upper bound, т.е. компонент [3] в GIRS’19 Cor. 34).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` связать параметр $W$ (carving width) с $w(G)$ из GIRS’19 (минимальная resolution‑width для Tseitin)
  и выписать минимальную цепочку неравенств, нужную для $n^{O(w(G))}$.

### 16.100. Исследовательский шаг: carving width $\le \mathrm{tw}(L(G))+1$ (и значит $n^{O(W)}=n^{O(w(G))}$)

- `Линза:` Эквивалентность.
- `Утверждение:` Для любого графа $G$ выполнено $\mathrm{cw}(G)\le \mathrm{tw}(L(G))+1$, где $\mathrm{cw}$ — carving width,
  а $L(G)$ — line graph. Следовательно, используя формулу для Tseitin‑width
  $w(G)=\max\{\Delta(G),\mathrm{tw}(L(G))\}-1$ (Galesi–Talebanfard–Torán 2018, Cor. 8+16,
  `../../resources/downloads/galesi_talebanfard_toran_2018_cops_robber_tseitin.pdf`), получаем $\mathrm{cw}(G)\le w(G)+2$, и верхняя оценка
  из §16.99 вида $n^{O(\mathrm{cw}(G))}$ эквивалентна $n^{O(w(G))}$.
- `Доказательство:` Пусть $(T,\{B_t\})$ — tree decomposition графа $L(G)$ ширины $k=\mathrm{tw}(L(G))$,
  т.е. $|B_t|\le k+1$.
  Для вершины $v\in V(G)$ множество рёбер $E(v)$ образует клику в $L(G)$, значит (по свойству Helly для поддеревьев в $T$)
  существует узел $t_v\in V(T)$ такой, что $E(v)\subseteq B_{t_v}$.
  Добавим к $T$ лист $\ell_v$ с ребром $\ell_v t_v$ и положим $\chi(\ell_v)=v$; получаем carving‑дерево
  (при необходимости его можно сделать бинарным стандартным «раздвоением» узлов копиями того же bag — ширина не растёт).
  Рассмотрим ребро $xy$ этого дерева и индуцированный разрез $V(G)=A\sqcup B$ по листьям.
  Если $xy=\ell_v t_v$, то $|E(A,B)|=\deg(v)\le |B_{t_v}|\le k+1$.
  Иначе $xy$ соединяет два bag‑узла: если $uv\in E(A,B)$, то в $L(G)$ вершина $e=\{u,v\}$ лежит и в $B_{t_u}$, и в $B_{t_v}$,
  значит её множество появлений в tree decomposition — связное поддерево, содержащее путь $t_u\leadsto t_v$ и, в частности, ребро $xy$.
  Следовательно, $e\in B_x\cap B_y$, то есть $E(A,B)\subseteq B_x\cap B_y$ и $|E(A,B)|\le |B_x\cap B_y|\le k+1$.
  Значит ширина построенной carving‑декомпозиции $\le k+1$, т.е. $\mathrm{cw}(G)\le \mathrm{tw}(L(G))+1$.
- `Toy‑тест:` для цикла $C_n$: $\mathrm{tw}(L(C_n))=2$, поэтому $\mathrm{cw}(C_n)\le 3$ (на деле $\mathrm{cw}(C_n)=2$);
  для звезды $K_{1,n}$: $\mathrm{tw}(L)=n-1$ и $\mathrm{cw}(K_{1,n})=n=\mathrm{tw}(L)+1$.
- `Статус:` доказано.
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` теперь, когда первоисточник $w(G)=\max\{\Delta(G),\mathrm{tw}(L(G))\}-1$ зафиксирован (16.101),
  обновить цепочку в §16.98/Cor. 34: tree‑like upper bound $n^{O(\mathrm{cw}(G))}$ можно заменить на $n^{O(w(G))}$ без ссылочных дыр.

### 16.101. Исследовательский шаг: точная ссылка на $w(G)=\max\{\\Delta(G),\\mathrm{tw}(L(G))\\}-1$ для Tseitin‑width

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $G$ — связный граф, а $\\varphi$ — нечётная разметка (odd marking), так что Tseitin‑CNF $T(G,\\varphi)$ невыполнима.
  Тогда минимальная ширина резолюционного опровержения удовлетворяет
  $$W(T(G,\\varphi)\\vdash\\bot)=\\max\\{\\Delta(G),\\mathrm{tw}(L(G))\\},$$
  где $\\Delta(G)$ — максимальная степень, $L(G)$ — line graph. В обозначениях GIRS’19 (Cor. 33),
  где $w(G)=W(T(G,\\varphi)\\vdash\\bot)-1$, получаем
  $$w(G)=\\max\\{\\Delta(G),\\mathrm{tw}(L(G))\\}-1.$$
- `Доказательство (по источнику):` Galesi–Talebanfard–Torán (2018) доказывают (i) Cor. 8:
  $W(T(G,\\varphi)\\vdash\\bot)=\\max\\{\\Delta(G),\\mathrm{ec}(G)-1\\}$, и (ii) Cor. 16:
  $\\mathrm{ec}(G)=\\mathrm{tw}(L(G))+1$; подстановка даёт требуемую формулу.
  См. `../../resources/downloads/galesi_talebanfard_toran_2018_cops_robber_tseitin.pdf`.
- `Toy‑тест:` для звезды $K_{1,n}$ имеем $\\Delta=n$ и $L(G)=K_n$ с $\\mathrm{tw}(K_n)=n-1$,
  значит $W=\\max\\{n,n-1\\}=n$ (и $w=n-1$), что согласуется с тем, что начальные клаузы имеют ширину $n$.
  Для цикла $C_n$: $\\Delta=2$ и $L(C_n)=C_n$ с $\\mathrm{tw}=2$, поэтому $W=2$ (и $w=1$).
- `Статус:` известный факт (точная ссылка; закрывает Q19).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` сопоставить эту treewidth‑формулу с альтернативной параметризацией Tseitin‑width через branch‑width
  из Alekhnovich–Razborov (2011) (возможная замена $\\mathrm{tw}(L(G))$ на эквивалентную «ширину»).

### 16.102. Исследовательский шаг: $n^{O(w(G))}=2^{O(\\mathrm{tw}(G)\\,\\Delta(G)\\log n)}$ (через оценки на $\\mathrm{tw}(L(G))$)

- `Линза:` Трейд‑офф.
- `Утверждение:` Пусть $G$ — связный граф на $n$ вершинах и $\\varphi$ — нечётная разметка, так что Tseitin‑CNF $T(G,\\varphi)$ невыполнима.
  Обозначим $w(G):=W(T(G,\\varphi)\\vdash\\bot)-1$. Тогда
  $$n^{O(w(G))}=2^{O(\\mathrm{tw}(G)\\,\\Delta(G)\\log n)}.$$
- `Доказательство:` По §16.101 имеем $w(G)+1=\\max\\{\\Delta(G),\\mathrm{tw}(L(G))\\}$.
  По Harvey–Wood (2014), неравенство (2), $\\mathrm{tw}(L(G))\\le (\\mathrm{tw}(G)+1)\\Delta(G)-1$
  (`../../resources/downloads/harvey_wood_2014_treewidth_line_graphs.pdf`).
  Следовательно $w(G)=O(\\mathrm{tw}(G)\\,\\Delta(G))$ и потому
  $$n^{O(w(G))}=2^{O(w(G)\\log n)}=2^{O(\\mathrm{tw}(G)\\,\\Delta(G)\\log n)}.$$
- `Toy‑тест:` для звезды $K_{1,n}$: $\\mathrm{tw}(G)=1$, $\\Delta(G)=n$, и формула даёт $2^{O(n\\log n)}$, что согласуется с $n^{O(w)}$ при $w=n-1$ (16.101).
- `Статус:` доказано (вывод из известных фактов).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` обновить формулировку в §16.98/Cor. 34, чтобы $2^{O(\\mathrm{tw}(G)\\Delta(G)\\log n)}$ появлялось с явной ссылкой (закрыть Q20).

### 16.103. Исследовательский шаг: Tseitin‑width через branch‑width гиперграфа (Alekhnovich–Razborov 2011)

- `Линза:` Эквивалентность.
- `Утверждение:` Для любого связного графа $G$ и нечётной разметки $\sigma$ (так что Tseitin‑CNF $T(G,\sigma)$ невыполнима)
  branch‑width $\\mathrm{wb}(T(G,\\sigma))$ её «подлежащего гиперграфа» $H_{T(G,\\sigma)}$ удовлетворяет
  $$\\mathrm{wb}(T(G,\\sigma))=\\Theta\\bigl(W(T(G,\\sigma)\\vdash\\bot)\\bigr),$$
  где $W(F\\vdash\\bot)$ — минимальная resolution‑width (Alekhnovich–Razborov 2011, Thm. 2.12,
  `../../resources/downloads/alekhnovich_razborov_2011_satisfiability_branchwidth_tseitin.pdf`).
  При этом $H_{T(G,\\sigma)}$ совпадает с двойственным гиперграфом $G^*$ (с повторениями гиперрёбер), см. Remark 2.11 там же.
  В частности, вместе с точной формулой §16.101 получаем сравнение
  $$\\mathrm{wb}(T(G,\\sigma))=\\Theta\\bigl(\\max\\{\\Delta(G),\\mathrm{tw}(L(G))\\}\\bigr).$$
- `Toy‑тест:` для $K_{1,n}$ имеем $W=n$ (16.101) и $\\mathrm{wb}=\\Theta(n)$ по Thm. 2.12; для $C_n$ имеем $W=2$ и $\\mathrm{wb}=\\Theta(1)$.
- `Статус:` известный факт (точная ссылка; закрывает Q21).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` если нужно использовать без $\\Theta(\\cdot)$, извлечь из доказательства Thm. 2.12 явные константы в обе стороны (см. Q22).

### 16.104. Исследовательский шаг: явные константы в $\\mathrm{wb}(T(G,\\sigma))=\\Theta(W(T(G,\\sigma)\\vdash\\bot))$

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $G$ — связный граф и $T(G,\\sigma)$ — соответствующая невыполнимая Tseitin‑CNF. Обозначим
  $$W:=W(T(G,\\sigma)\\vdash\\bot),\\qquad B:=\\mathrm{wb}(T(G,\\sigma)),$$
  где $W$ — минимальная resolution‑width, $B$ — branch‑width подлежащего гиперграфа (AR’11 Remark 2.11). Тогда выполнены явные неравенства
  $$\\frac{1}{8}B\\ \\le\\ W\\ \\le\\ 2B.$$
- `Доказательство (из AR’11, §4):`
  1) (Gaussian width) Пусть $w_g(G,\\sigma)$ — минимальная ширина Gaussian‑рефутации (Def. 4.2). Тогда по Prop. 4.3
     $$\\tfrac12 W\\le w_g(G,\\sigma)\\le W.$$
  2) (Branch‑width vs Gaussian width) В доказательстве Lemma 4.4 показано, что $B\\ge w_g(G,\\sigma)$ (tree‑like restriction),
     а «алгоритм Figure 3.1 + obstacle‑аргумент» даёт $B\\le 8\\,w_g(G,\\sigma)$ (повторяется оценка из доказательства Lemma 3.1).
     Следовательно $w_g(G,\\sigma)\\le B\\le 8w_g(G,\\sigma)$.
  3) Комбинируя 1)–2), получаем $W\\le 2w_g\\le 2B$ и $B\\le 8w_g\\le 8W$, т.е. $B/8\\le W\\le 2B$.
  Ссылки: `../../resources/downloads/alekhnovich_razborov_2011_satisfiability_branchwidth_tseitin.pdf`.
- `Toy‑тест:` для $K_{1,n}$ (16.101) $W=n$ и $B\\ge r(H)=n$, поэтому $B/8\\le W\\le 2B$ выполняется; для $C_n$ имеем $W=2$ и $B=\\Theta(1)$.
- `Статус:` доказано (из явных констант в AR’11).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` если хочется убрать константу 8, проверить, можно ли в Lemma 4.4 получить $B\\le c\\,w_g$ с меньшим $c$ (или равенство) для $G^*$.

### 16.105. Исследовательский шаг: $\\mathrm{wb}(G^*)=\\mathrm{cw}(G)$ (branch‑width двойственного гиперграфа = carving width)

- `Линза:` Эквивалентность.
- `Утверждение:` Пусть $G=(V,E)$ — связный граф, а $G^*$ — его двойственный гиперграф с множеством вершин $E$ и гиперрёбрами
  $E(v)=\\{e\\in E: e\\text{ инцидентно }v\\}$ для $v\\in V$. Тогда
  $$\\mathrm{wb}(G^*)=\\mathrm{cw}(G),$$
  где $\\mathrm{wb}$ — branch‑width гиперграфа (AR’11, Def. 2.1), а $\\mathrm{cw}$ — carving width графа $G$ (как в §16.99–16.100).
- `Доказательство:` В branch‑decomposition гиперграфа $G^*$ листья соответствуют гиперрёбрам $E(v)$, то есть вершинам $v\\in V$.
  Пусть $(T,\\theta)$ — branch‑decomposition $G^*$. Определим разметку листьев $\\chi: \\mathrm{Leaves}(T)\\to V$ как $\\chi(\\theta(E(v)))=v$.
  Рассмотрим любой ненулевой узел $t$ дерева (т.е. $t\\ne\\mathrm{root}$) и пусть $S_t\\subseteq V$ — множество вершин, чьи листья лежат в поддереве $t$.
  Тогда по определению AR’11 (Def. 2.1) имеем
  $$\\mathrm{Cut}(t)=\\Bigl(\\bigcup_{v\\in S_t}E(v)\\Bigr)\\cap\\Bigl(\\bigcup_{v\\notin S_t}E(v)\\Bigr)=\\delta_G(S_t),$$
  то есть множество рёбер графа $G$, пересекающих разрез $S_t\\sqcup(V\\setminus S_t)$.
  Поэтому порядок узла $t$ равен $|\\delta_G(S_t)|$.
  Замечая, что каждому узлу $t\\ne\\mathrm{root}$ соответствует ребро $t\\text{--parent}(t)$, получаем carving‑декомпозицию $G$ на том же дереве $T$
  (игнорируя ориентацию): ширина разреза на ребре $t\\text{--parent}(t)$ равна $|\\delta_G(S_t)|=|\\mathrm{Cut}(t)|$.
  Отсюда $\\mathrm{cw}(G)\\le \\mathrm{wb}(G^*)$.

  В обратную сторону: из любой carving‑декомпозиции $(T,\\chi)$ графа $G$ (листья помечены вершинами) строим branch‑decomposition $G^*$,
  положив $\\theta(E(v)):=\\chi^{-1}(v)$. Для узла $t\\ne\\mathrm{root}$ множество $S_t$ листьев в поддереве снова задаёт разрез вершин,
  и та же формула показывает $\\mathrm{Cut}(t)=\\delta_G(S_t)$. Значит ширины совпадают на каждом соответствующем разрезе, и
  $\\mathrm{wb}(G^*)\\le \\mathrm{cw}(G)$.
  Совместно: $\\mathrm{wb}(G^*)=\\mathrm{cw}(G)$.
- `Toy‑тест:` для звезды $K_{1,n}$: $\\mathrm{cw}(K_{1,n})=n$ (любой разрез, отделяющий центр от листа, режет $n$ рёбер) и $G^*$ имеет гиперрёбра
  размеров $n$ и $1$, так что $\\mathrm{wb}(G^*)=n$; для цикла $C_n$: $\\mathrm{cw}(C_n)=2$ и $\\mathrm{wb}(C_n^*)=2$.
- `Статус:` доказано (закрывает Q23).
- `Барьер‑чек:` r — неприменимо, NP — неприменимо, alg — неприменимо.
- `Следующий шаг:` использовать $\\mathrm{wb}(G^*)=\\mathrm{cw}(G)$, чтобы переписать AR‑параметры для Tseitin (Remark 2.11) напрямую через carving width,
  и сравнить с treewidth‑формулой §16.101.
