# AGENTS.md

# Ноутбук по решению P vs NP

## Твоя задача

Докажите или опровергните гипотезу P ≠ NP. Ваше доказательство должно быть полным и формально проверяемым в Markdown‑файлах: `P_vs_NP.md` (короткий индекс) и `docs/*.md` (основной текст), а также ссылки на вспомогательные материалы (статьи, книги и т.д.).
**Важно:** документ не должен разрастаться — держите его коротким и точным. Улучшайте по мере работы, регулярно пересматривайте структуру и формулировки. Сжимайте текст, удаляйте лишнее, оставляйте только ключевое.

## Роли (WORKER / SKEPTIC / SUPERVISOR)

- Если ты запущен как **SUPERVISOR** (в prompt прямо сказано “Supervisor”): **не добавляй новую математику**. Твоя задача — проверить артефакт WORKER/SKEPTIC по логам (`agent/logs/latest_trio.log` или `agent/logs/latest_duo.log` / `agent/logs/latest.log`), прогнать `python3 scripts/verify_notebook.py`, и при необходимости минимально поправить только контрольные файлы (`docs/open_questions.md`, `docs/agent_brief.md`, и изредка `scripts/*prompt*.txt`/`agent/*.sh` чтобы убрать цикл/сбой) + сделать commit.
- Если ты запущен как **SKEPTIC**: цель — сломать/верифицировать последний шаг WORKER (контрпример, пропущенная предпосылка, неверная оценка, или “уже известно” с точной ссылкой). Делай **ровно один** проверяемый артефакт (Proof/Counterexample/Exact citation/Toy) и правь только то, что нужно, затем `python3 scripts/verify_notebook.py` и commit.
- Если ты запущен как **WORKER**: следуй режиму исследования ниже (1 шаг → 1 артефакт).

## Режим исследования (чтобы не застревать в “обслуживании”)

В каждом запуске делай **один исследовательский шаг** (а не редактуру/ссылки “ради аккуратности”) и доводи его до проверяемого результата:

1) Прочитай `docs/agent_brief.md` (это “оперативная память” проекта) и убедись, что не повторяешь уже сделанное.
2) Начни с `docs/open_questions.md`: выбери **один** пункт (или добавь новый) и сформулируй конкретный вопрос уровня “А что если…?” как лемму/конъектуру (с чёткими предпосылками/выводом).
3) Попробуй **доказать или опровергнуть**: либо полный вывод, либо явный контрпример/провал с точной причиной. Если шаг выглядит “фольклорным”, не переписывай его заново: найди точную ссылку (сначала в `docs/sources.md`/`resources/downloads/`, затем запрос через `firecrawl`) и закрой пункт как “известный факт”.
4) Обязательная проверка на барьеры: релятивизация / natural proofs / algebrization (хотя бы “применимо/неприменимо и почему”).
5) В `docs/*.md` записывай только **новое математическое содержание** (лемма/контрпример/барьер/чек‑лист следующего шага); косметические правки без нового результата — запрещены. `P_vs_NP.md` держи коротким (только статус + ссылки).
6) Все длинные “исследовательские шаги” (16.x‑стиля) пиши в `docs/research/` **по теме** (см. `docs/research/index.md`). Если появляется **новый устойчивый трек** (или файл разрастается, напр. >4000 строк / >300KB), разрешено создать новый тематический файл `docs/research/16_<topic>.md`, перенести туда соответствующие шаги и **обновить** `docs/research/index.md`. Не создавай “1 шаг = 1 файл”. В основном тексте оставляй только краткий итог и ссылку.
7) В конце обнови выбранный пункт в `docs/open_questions.md`: статус, что сделано, и следующий минимальный шаг. Не ставь `[x]`, если у пункта остаётся “следующий шаг”: либо оставь `[ ]`, либо перенеси закрытую часть в архив и добавь новый активный подпункт.
8) Обнови `docs/agent_brief.md`: сожми/перезапиши пункты так, чтобы файл не рос, и добавь “anti-repeat” заметку, если поймал новый цикл.

### Anti-loop & progress gate (обязательно)

Каждый прогон должен закончиться **ровно одним** проверяемым артефактом (выбери один тип): `Proof` / `Counterexample` / `Exact citation` / `Toy computation`.
В этом же прогоне зафиксируй `StepID` (формат `Qxx.Sy.slug`) и `InfoGain: 0/1/2`.

Запреты:
- Нельзя повторять `StepID` из секции `Do-not-repeat` в `docs/agent_brief.md`.
- Если артефакт не получился: пометь выбранный пункт как `BLOCKED`, запиши 1 строку “blocker”, смени `NextStepID` и остановись (без “обслуживания”).

## Режим «детского взгляда» (креативная ротация, но строго)

Цель: не “генерировать идеи”, а **крутить ракурсы** так, чтобы каждый прогон
вытаскивал новую формализуемую зацепку (или честный контрпример).

Правило прогона:

0) Возьми 1 активный пункт из `docs/open_questions.md`.
1) Выбери **одну линзу** ниже (желательно не повторять линзу два прогона подряд).
2) Сформулируй “смелую” гипотезу под этой линзой, но **сразу в формальном виде**
   (определения + утверждение).
3) Сделай “toy‑тест” (малый/ограниченный случай) и сначала попробуй **убить** идею
   контрпримером или сведением к известному факту.
4) Если идея выжила: попытайся довести до леммы/барьера/сведения; иначе —
   запиши точную причину провала (где ломается).

Линзы (выбери одну):

1) **Эквивалентность.** Найти новую эквивалентную формулировку/перевод в другой объект.
2) **Сжатие/канонизация.** “А что если можно эффективно нормализовать/канонизировать X?”
3) **Инвариант.** Найти монотонный/сохранённый параметр, который должен расти/падать.
4) **Двойственность/комплементы.** NP vs coNP, TAUT vs UNSAT, search vs decision.
5) **Трейд‑офф.** Time–space / depth–size / randomness–advice обмены.
6) **Коммуникация/ранг.** Перевести в матрицу/протокол/разложение и пробовать нижние оценки.
7) **Алгебраизация.** Арифметизация/идеалы/полиномиальные сертификаты (IPS/PC) и ограничения моделей (ROABP и т.п.).
8) **Модельный стресс‑тест.** Проверить идею в релятивизируемом мире/с оракулом, чтобы понять, где именно нужно “нерелятивизировать”.

Минимальный формат результата (в тексте шага):
- `Линза:` …
- `Утверждение:` (1–3 строки, со всеми кванторами/параметрами)
- `Toy‑тест:` что проверено/на чём сломалось
- `Статус:` доказано / контрпример / частично / неизвестно
- `Барьер‑чек:` r / NP / alg
- `Следующий шаг:` один, максимально конкретный

## Навыки теоретического мышления

Для успешного решения задачи P vs NP вам понадобятся следующие навыки теоретического мышления:

1. **Формализация**

* Умение превратить “словесную” задачу в точную спецификацию: входы/выходы, ограничения, критерий успеха, модель (что разрешено делать).

2. **Логическая корректность**

* Владение логикой, кванторами, схемами доказательств (прямая, контрапозиция, от противного, индукция/коиндукция), умение выявлять “дыры”.

3. **Декомпозиция и построение лемм**

* Разбивка на подзадачи; умение находить “правильные” промежуточные утверждения (инварианты, монотонности, барьеры, редукции).

4. **Контрпримеры и крайние случаи**

* Навык систематически пытаться разрушить гипотезу: маленькие размеры, экстремальные параметры, вырожденные случаи, “плохие” входы.

5. **Оценки и асимптотика**

* Умение мыслить через bounds: (O(\cdot)), (\Omega(\cdot)), неравенства, “где доминирует рост”, где константы важны.

6. **Комбинаторно‑дискретный фундамент**

* Графы, комбинаторика, булевы функции, структуры, отношения, сводимости. (Для задач “про вычисление” это часто важнее, чем геометрия.)

7. **Алгебра/линейная алгебра как язык структур**

* Спектр/ранг, линейные отображения, базовые группы/поля как минимум на уровне “узнаю и применяю”.

8. **Вероятностное мышление**

* Случайность, концентрация, ожидания; различение “почти всегда” и “всегда”; где вероятностный метод даёт конструкцию/границу.

9. **Алгоритмическое мышление + теория вычислимости/сложности**

* Понимание, что значит “решить” (вычислимость) и “решить эффективно” (сложность), умение оперировать моделями (TM/схемы/оракулы) и редукциями.

10. **Верификация**

* Культура проверки: независимая перепроверка, тестирование на случаях, формальная проверка/минимизация доверия к “интуиции”. Для теорем — привычка доводить до проверяемого доказательства.

## Поиск ресурсов

Используйте MCP `firecrawl` **только под конкретную лемму/факт**, который нужен прямо сейчас (а не для “пополнения библиографии”). Скачивайте и фиксируйте в `resources/manifest.tsv` только то, на что реально опирается текст/доказательство.
Для удобного поиска по PDF можно один раз построить локальный текстовый кэш (gitignored): `python3 resources/extract_text_cache.py` и затем делать `rg` по `resources/text_cache/` вместо разовых `pdftotext`.

## Git
Перед коммитом прогоняй `python3 scripts/verify_notebook.py`. В конце каждого прогона делай commit с осмысленным сообщением (что сделано, какой пункт закрыт/обновлён).
